{"ast":null,"code":"import { of } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\n// export function appEmailValidator(domains: string[]): ValidatorFn {\n//   const domainStrings = domains.join('|'); \n//   const regExp = new RegExp(`[^@]{6,}@gmail\\.(${domainStrings})$`);\n//   return (control) => {\n//     const x = control.value;\n//     const z = regExp.test(control.value);\n//     return control.value === \"\" || regExp.test(control.value) ? null : { appEmailValidator: true };\n//   };\n// }\nexport function appEmailAsyncValidator(userService) {\n  return control => {\n    return userService.checkEmailExistence(control.value).pipe(map(exists => {\n      return exists ? null : {\n        appEmailAsyncValidator: true\n      };\n    }), catchError(() => of(null)));\n  };\n}","map":{"version":3,"names":["of","map","catchError","appEmailAsyncValidator","userService","control","checkEmailExistence","value","pipe","exists"],"sources":["D:\\JS\\AngularProjects\\fandom\\fandom\\src\\app\\shared\\validators\\emailValidator.ts"],"sourcesContent":["import { ValidatorFn, AbstractControl, ValidationErrors } from \"@angular/forms\";\r\nimport { Observable, of } from 'rxjs';\r\nimport { map, catchError } from 'rxjs/operators';\r\nimport { UserService } from \"src/app/user/user.service\";\r\n\r\n// export function appEmailValidator(domains: string[]): ValidatorFn {\r\n//   const domainStrings = domains.join('|'); \r\n//   const regExp = new RegExp(`[^@]{6,}@gmail\\.(${domainStrings})$`);\r\n\r\n//   return (control) => {\r\n//     const x = control.value;\r\n//     const z = regExp.test(control.value);\r\n//     return control.value === \"\" || regExp.test(control.value) ? null : { appEmailValidator: true };\r\n//   };\r\n// }\r\n\r\nexport function appEmailAsyncValidator(userService: UserService): ValidatorFn {\r\n  return (control: AbstractControl): Observable<ValidationErrors | null> => {\r\n    return userService.checkEmailExistence(control.value).pipe(\r\n      map(exists => {\r\n        return exists ? null : { appEmailAsyncValidator: true };\r\n      }),\r\n      catchError(() => of(null))\r\n    );\r\n  };\r\n}\r\n"],"mappings":"AACA,SAAqBA,EAAE,QAAQ,MAAM;AACrC,SAASC,GAAG,EAAEC,UAAU,QAAQ,gBAAgB;AAGhD;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAM,SAAUC,sBAAsBA,CAACC,WAAwB;EAC7D,OAAQC,OAAwB,IAAyC;IACvE,OAAOD,WAAW,CAACE,mBAAmB,CAACD,OAAO,CAACE,KAAK,CAAC,CAACC,IAAI,CACxDP,GAAG,CAACQ,MAAM,IAAG;MACX,OAAOA,MAAM,GAAG,IAAI,GAAG;QAAEN,sBAAsB,EAAE;MAAI,CAAE;IACzD,CAAC,CAAC,EACFD,UAAU,CAAC,MAAMF,EAAE,CAAC,IAAI,CAAC,CAAC,CAC3B;EACH,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}