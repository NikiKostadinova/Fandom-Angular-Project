{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/user/user.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = function (a0, a1) {\n  return {\n    \"fa-star\": a0,\n    \"fa-star-o\": a1\n  };\n};\nfunction BookDetailsComponent_div_0_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"i\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const star_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, ctx_r3.book.rating >= star_r6, ctx_r3.book.rating < star_r6));\n  }\n}\nconst _c1 = function (a1) {\n  return [\"/books\", a1, \"editBook\"];\n};\nfunction BookDetailsComponent_div_0_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵtext(1, \"Update Info\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c1, ctx_r4.book._id));\n  }\n}\nfunction BookDetailsComponent_div_0_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function BookDetailsComponent_div_0_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.onDeleteBook());\n    });\n    i0.ɵɵtext(1, \"Delete Book\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c2 = function () {\n  return [1, 2, 3, 4, 5];\n};\nfunction BookDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 2)(3, \"div\", 7);\n    i0.ɵɵelement(4, \"img\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 9)(7, \"h1\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"h5\", 11);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 12);\n    i0.ɵɵtemplate(12, BookDetailsComponent_div_0_span_12_Template, 2, 4, \"span\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"p\");\n    i0.ɵɵelementStart(14, \"p\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, BookDetailsComponent_div_0_button_16_Template, 2, 3, \"button\", 14);\n    i0.ɵɵtemplate(17, BookDetailsComponent_div_0_button_17_Template, 2, 0, \"button\", 15);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.book.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.book.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"by \", ctx_r0.book.author, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(7, _c2));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.book.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLogged);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLogged);\n  }\n}\nfunction BookDetailsComponent_div_1_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"i\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const star_r11 = ctx.$implicit;\n    const comment_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, comment_r9.rating >= star_r11, comment_r9.rating < star_r11));\n  }\n}\nfunction BookDetailsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20)(2, \"div\", 21);\n    i0.ɵɵelement(3, \"img\", 22);\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 23)(7, \"div\", 12);\n    i0.ɵɵtemplate(8, BookDetailsComponent_div_1_span_8_Template, 2, 4, \"span\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const comment_r9 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(comment_r9.username);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(3, _c2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", comment_r9.comment, \" \");\n  }\n}\nfunction BookDetailsComponent_div_4_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵlistener(\"click\", function BookDetailsComponent_div_4_span_9_Template_span_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const star_r14 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.setRating(star_r14));\n    });\n    i0.ɵɵelement(1, \"i\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const star_r14 = ctx.$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, ctx_r13.newCommentRating >= star_r14, ctx_r13.newCommentRating < star_r14));\n  }\n}\nfunction BookDetailsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\")(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" comment:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 25)(6, \"form\", 26);\n    i0.ɵɵlistener(\"submit\", function BookDetailsComponent_div_4_Template_form_submit_6_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onSubmitComment());\n    });\n    i0.ɵɵelementStart(7, \"textarea\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function BookDetailsComponent_div_4_Template_textarea_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.newCommentText = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 12);\n    i0.ɵɵtemplate(9, BookDetailsComponent_div_4_span_9_Template, 2, 4, \"span\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 29);\n    i0.ɵɵtext(11, \"Leave a Comment\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.username);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newCommentText);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(3, _c2));\n  }\n}\nexport class BookDetailsComponent {\n  constructor(apiService, activatedRoute, userService, router) {\n    this.apiService = apiService;\n    this.activatedRoute = activatedRoute;\n    this.userService = userService;\n    this.router = router;\n    this.newCommentText = '';\n    this.newCommentRating = 0;\n    this.username = '';\n  }\n  get isLogged() {\n    return this.userService.isLogged;\n  }\n  ngOnInit() {\n    this.fetchBook();\n    this.fetchUser();\n  }\n  fetchBook() {\n    const id = this.activatedRoute.snapshot.params['id'];\n    this.apiService.getBook(id).subscribe(book => {\n      this.book = book;\n      if (this.book.commentList && this.book.commentList.length > 0) {\n        const totalRating = this.book.commentList.reduce((acc, comment) => acc + comment.rating, 0);\n        this.book.rating = totalRating / this.book.commentList.length;\n      }\n    });\n  }\n  fetchUser() {\n    // const username = this.activatedRoute.snapshot.params['username'];\n    const username = this.userService.getCurrentUserUsername();\n    if (username) {\n      this.username = username;\n    }\n  }\n  onDeleteBook() {\n    const id = this.activatedRoute.snapshot.params['id'];\n    this.apiService.deleteBook(id).subscribe(() => {\n      console.log('Book deleted successfully!');\n      this.router.navigate(['/books']);\n    }, error => {\n      console.error('Error deleting book:', error);\n    });\n  }\n  setRating(rating) {\n    this.newCommentRating = rating;\n  }\n  onSubmitComment() {\n    if (this.newCommentText.trim() === '') {\n      return;\n    }\n    const bookId = this.activatedRoute.snapshot.params['id'];\n    const currentUserId = this.userService.getCurrentUserId();\n    if (currentUserId === null) {\n      return;\n    }\n    const newComment = {\n      comment: this.newCommentText,\n      userId: {\n        _id: currentUserId\n      },\n      username: this.username,\n      bookId: bookId,\n      rating: this.newCommentRating\n    };\n    if (this.book) {\n      this.book.commentList.push(newComment);\n      this.apiService.updateBookWithComment(this.book).subscribe(updatedBook => {\n        this.book = updatedBook;\n        this.newCommentText = '';\n        this.newCommentRating = 0;\n      });\n    }\n  }\n}\nBookDetailsComponent.ɵfac = function BookDetailsComponent_Factory(t) {\n  return new (t || BookDetailsComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i2.Router));\n};\nBookDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BookDetailsComponent,\n  selectors: [[\"app-book-details\"]],\n  decls: 5,\n  vars: 3,\n  consts: [[\"class\", \"container\", 4, \"ngIf\"], [\"class\", \"comment\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-3\"], [1, \"col-md-9\"], [\"class\", \"leave-comment\", 4, \"ngIf\"], [1, \"container\"], [1, \"row\"], [1, \"card\", \"shadow-effect\", 2, \"padding\", \"0\"], [\"alt\", \"Book Image\", \"width\", \"250\", \"height\", \"250\", 1, \"img-fluid\", \"founded-start\", 3, \"src\"], [1, \"card-body\", \"col-lg-10\"], [1, \"mt-3\", \"mb-3\"], [1, \"card-author\"], [1, \"rating\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn-info\", 3, \"routerLink\", 4, \"ngIf\"], [\"class\", \"btn-delete ml-2\", 3, \"click\", 4, \"ngIf\"], [1, \"fa\", 3, \"ngClass\"], [1, \"btn-info\", 3, \"routerLink\"], [1, \"btn-delete\", \"ml-2\", 3, \"click\"], [1, \"comment\"], [1, \"comment-main\"], [1, \"user\"], [\"src\", \"/assets/profile.png\", \"alt\", \"avatar\", \"width\", \"50\", \"height\", \"50\"], [1, \"content\"], [1, \"leave-comment\"], [1, \"answer\"], [3, \"submit\"], [\"name\", \"commentText\", \"id\", \"comment\", \"cols\", \"30\", \"rows\", \"10\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 1, \"btn-comment\"], [3, \"click\"]],\n  template: function BookDetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, BookDetailsComponent_div_0_Template, 18, 8, \"div\", 0);\n      i0.ɵɵtemplate(1, BookDetailsComponent_div_1_Template, 11, 4, \"div\", 1);\n      i0.ɵɵelement(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵtemplate(4, BookDetailsComponent_div_4_Template, 12, 4, \"div\", 4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.book);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.book == null ? null : ctx.book.commentList);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLogged);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i2.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm],\n  styles: [\".rating[_ngcontent-%COMP%] {\\n  font-size: 15px;\\n  padding-left: 1.5em;\\n}\\n\\n.star[_ngcontent-%COMP%] {\\n  color: orange;\\n  cursor: pointer;\\n}\\n\\n.full[_ngcontent-%COMP%]::before {\\n  content: \\\"\\\\2605\\\"; \\n\\n}\\n\\n.empty[_ngcontent-%COMP%]::before {\\n  content: \\\"\\\\2606\\\"; \\n\\n}\\n\\n\\n\\n.leave-comment[_ngcontent-%COMP%]{\\n  margin-left: 100px;\\n  margin-top: 10px;\\n  background-color: rgb(252, 247, 241);\\n  color:rgb(47, 97, 80);\\n}\\n\\n.btn-comment[_ngcontent-%COMP%]{\\n  color:rgb(47, 97, 80);\\n  background-color: rgb(171, 206, 195);\\n}\\n\\n\\n\\n\\n\\n.container[_ngcontent-%COMP%]{\\n \\n\\n display: flex;\\n    \\n\\n    \\n\\n}\\n.card[_ngcontent-%COMP%]{\\n  \\n\\n  \\n\\n  position: fixed;\\n    background-color: azure;\\n    flex: 1;\\n\\n}\\n\\n.card-body[_ngcontent-%COMP%]{\\n  flex: 1;\\n  background-color: azure;\\n display: block;\\n width: 100%;\\n\\n    \\n\\n\\n}\\n\\n.btn-info[_ngcontent-%COMP%]{\\n    height: 30px;\\n    border-radius: 5px;\\n    border: none;\\n    font-size: 13px;\\n    background-color: var(--primary-color);\\n}\\n\\n.btn-delete[_ngcontent-%COMP%]{\\n    height: 30px;\\n    border-radius: 5px;\\n    border: none;\\n    font-size: 13px;\\n    background-color: var(--primary-color);\\n}\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n  \\n.comment[_ngcontent-%COMP%] {\\n    margin-top: 1em;\\n    border: 1px solid;\\n    border-radius: 0.3em;\\n    width: 100%;\\n    padding: 1em;\\n    background-color: rgb(215, 249, 237);\\n  }\\n  \\n  .comment[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    padding: 0.3em;\\n    text-align: center;\\n    background-color: #ffffff;\\n    border-bottom: 1px dashed;\\n    margin-right: 0;\\n  }\\n  \\n  .comment-main[_ngcontent-%COMP%] {\\n    margin: 1em;\\n    display: flex;\\n  }\\n\\n  \\n  .userdetails[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    text-align: center;\\n  }\\n  \\n  .userdetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    padding-left: 0;\\n    text-align: left;\\n  }\\n  \\n  .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    padding-left: 1.5em;\\n  }\\n  \\n  .userdetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\\n    border: 1px solid;\\n    display: flex;\\n    justify-content: center;\\n  }\\n  \\n  .userdetails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n    padding: 0;\\n    align-self: center;\\n    margin: 1em 0;\\n    width: 5em;\\n    height: 5em;\\n    border: 1px solid;\\n  }\\n  \\n  .footer[_ngcontent-%COMP%] {\\n    font-size: 1.5em;\\n    border-top: 1px dashed;\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-end;\\n    color: rgb(0, 128, 182);\\n  }\\n  \\n  .footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    background-color: #ffffff;\\n    border: none;\\n    cursor: pointer;\\n  }\\n  \\n  .footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    padding-left: 0.5em;\\n  }\\n  \\n  .footer[_ngcontent-%COMP%]   .fas.fa-thumbs-up[_ngcontent-%COMP%] {\\n    color: green;\\n  }\\n  \\n  .footer[_ngcontent-%COMP%]   .fas.fa-thumbs-down[_ngcontent-%COMP%] {\\n    color: red;\\n  }\\n  \\n  \\n\\n  \\n  .answer-comment[_ngcontent-%COMP%] {\\n    width: 100%;\\n    \\n\\n    margin-top: 1em;\\n  }\\n  \\n  .answer-comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    flex-basis: 15%;\\n    padding-bottom: 0.3em;\\n  }\\n  \\n  .answer-comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n    color: rgb(0, 128, 182);\\n    font-size: 1.2em;\\n  }\\n  \\n  .answer[_ngcontent-%COMP%] {\\n    border: 1px solid;\\n    border-radius: 0.3em;\\n    flex-basis: 85%;\\n    text-align: center;\\n  }\\n  \\n  .answer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n    width: 90%;\\n    margin-top: 1rem;\\n    border-radius: 0.5rem;\\n  }\\n  \\n  .answer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    color: white;\\n    margin: 0.5em 1em;\\n    padding: 0.2em 1em;\\n    border: 1px solid;\\n    border-radius: 0.3em;\\n  }\\n  \\n  .answer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n    cursor: pointer;\\n  }\\n  \\n  .comment-area[_ngcontent-%COMP%] {\\n    min-width: 100%;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2F0ZWdvcmllcy9ib29rLWRldGFpbHMvYm9vay1kZXRhaWxzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0VBQ0UsZUFBZTtFQUNmLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZ0JBQWdCLEVBQUUsOEJBQThCO0FBQ2xEOztBQUVBO0VBQ0UsZ0JBQWdCLEVBQUUsOEJBQThCO0FBQ2xEOzs7O0FBSUE7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLG9DQUFvQztFQUNwQyxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsb0NBQW9DO0FBQ3RDOzs7Ozs7QUFNQTtDQUNDLHFCQUFxQjtDQUNyQixhQUFhO0lBQ1YsNkJBQTZCO0lBQzdCLG1CQUFtQjtBQUN2QjtBQUNBO0VBQ0UseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixlQUFlO0lBQ2IsdUJBQXVCO0lBQ3ZCLE9BQU87O0FBRVg7O0FBRUE7RUFDRSxPQUFPO0VBQ1AsdUJBQXVCO0NBQ3hCLGNBQWM7Q0FDZCxXQUFXOzs7OztBQUtaOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osZUFBZTtJQUNmLHNDQUFzQztBQUMxQzs7QUFFQTtJQUNJLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLGVBQWU7SUFDZixzQ0FBc0M7QUFDMUM7O0FBRUE7OztLQUdLOzs7OztBQUtMO0lBQ0ksZUFBZTtJQUNmLGlCQUFpQjtJQUNqQixvQkFBb0I7SUFDcEIsV0FBVztJQUNYLFlBQVk7SUFDWixvQ0FBb0M7RUFDdEM7O0VBRUE7SUFDRSxjQUFjO0lBQ2Qsa0JBQWtCO0lBQ2xCLHlCQUF5QjtJQUN6Qix5QkFBeUI7SUFDekIsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLFdBQVc7SUFDWCxhQUFhO0VBQ2Y7OztFQUdBO0lBQ0UsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxlQUFlO0lBQ2YsZ0JBQWdCO0VBQ2xCOztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsaUJBQWlCO0lBQ2pCLGFBQWE7SUFDYix1QkFBdUI7RUFDekI7O0VBRUE7SUFDRSxVQUFVO0lBQ1Ysa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYixVQUFVO0lBQ1YsV0FBVztJQUNYLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGdCQUFnQjtJQUNoQixzQkFBc0I7SUFDdEIsYUFBYTtJQUNiLG1CQUFtQjtJQUNuQix5QkFBeUI7SUFDekIsdUJBQXVCO0VBQ3pCOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLFlBQVk7SUFDWixlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsWUFBWTtFQUNkOztFQUVBO0lBQ0UsVUFBVTtFQUNaOztFQUVBLG1CQUFtQjs7RUFFbkI7SUFDRSxXQUFXO0lBQ1gsbUJBQW1CO0lBQ25CLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxlQUFlO0lBQ2YscUJBQXFCO0VBQ3ZCOztFQUVBO0lBQ0UsdUJBQXVCO0lBQ3ZCLGdCQUFnQjtFQUNsQjs7RUFFQTtJQUNFLGlCQUFpQjtJQUNqQixvQkFBb0I7SUFDcEIsZUFBZTtJQUNmLGtCQUFrQjtFQUNwQjs7RUFFQTtJQUNFLFVBQVU7SUFDVixnQkFBZ0I7SUFDaEIscUJBQXFCO0VBQ3ZCOztFQUVBO0lBQ0UsWUFBWTtJQUNaLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEIsaUJBQWlCO0lBQ2pCLG9CQUFvQjtFQUN0Qjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxlQUFlO0VBQ2pCIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5yYXRpbmcge1xyXG4gIGZvbnQtc2l6ZTogMTVweDtcclxuICBwYWRkaW5nLWxlZnQ6IDEuNWVtO1xyXG59XHJcblxyXG4uc3RhciB7XHJcbiAgY29sb3I6IG9yYW5nZTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5mdWxsOjpiZWZvcmUge1xyXG4gIGNvbnRlbnQ6IFwiXFwyNjA1XCI7IC8qIFVuaWNvZGUgZm9yIGEgZmlsbGVkIHN0YXIgKi9cclxufVxyXG5cclxuLmVtcHR5OjpiZWZvcmUge1xyXG4gIGNvbnRlbnQ6IFwiXFwyNjA2XCI7IC8qIFVuaWNvZGUgZm9yIGFuIGVtcHR5IHN0YXIgKi9cclxufVxyXG5cclxuXHJcblxyXG4ubGVhdmUtY29tbWVudHtcclxuICBtYXJnaW4tbGVmdDogMTAwcHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjUyLCAyNDcsIDI0MSk7XHJcbiAgY29sb3I6cmdiKDQ3LCA5NywgODApO1xyXG59XHJcblxyXG4uYnRuLWNvbW1lbnR7XHJcbiAgY29sb3I6cmdiKDQ3LCA5NywgODApO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxNzEsIDIwNiwgMTk1KTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi5jb250YWluZXJ7XHJcbiAvKiBwb3NpdGlvbjogZml4ZWQ7ICovXHJcbiBkaXNwbGF5OiBmbGV4O1xyXG4gICAgLyogYmFja2dyb3VuZC1jb2xvcjogYXp1cmU7ICovXHJcbiAgICAvKiBoZWlnaHQ6IDUwMHB4OyAqL1xyXG59XHJcbi5jYXJke1xyXG4gIC8qIG1hcmdpbi1sZWZ0OiAtMzUwcHg7ICovXHJcbiAgLyogZGlzcGxheTogZmxleDsgKi9cclxuICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBhenVyZTtcclxuICAgIGZsZXg6IDE7XHJcblxyXG59XHJcblxyXG4uY2FyZC1ib2R5e1xyXG4gIGZsZXg6IDE7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogYXp1cmU7XHJcbiBkaXNwbGF5OiBibG9jaztcclxuIHdpZHRoOiAxMDAlO1xyXG5cclxuICAgIFxyXG5cclxuXHJcbn1cclxuXHJcbi5idG4taW5mb3tcclxuICAgIGhlaWdodDogMzBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogMTNweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xyXG59XHJcblxyXG4uYnRuLWRlbGV0ZXtcclxuICAgIGhlaWdodDogMzBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogMTNweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xyXG59XHJcblxyXG4vKiAuaW1nLWNhcmQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYXp1cmU7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgfSAqL1xyXG5cclxuXHJcblxyXG4gIFxyXG4uY29tbWVudCB7XHJcbiAgICBtYXJnaW4tdG9wOiAxZW07XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDAuM2VtO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBwYWRkaW5nOiAxZW07XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjE1LCAyNDksIDIzNyk7XHJcbiAgfVxyXG4gIFxyXG4gIC5jb21tZW50IGhlYWRlciBwIHtcclxuICAgIHBhZGRpbmc6IDAuM2VtO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQ7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XHJcbiAgfVxyXG4gIFxyXG4gIC5jb21tZW50LW1haW4ge1xyXG4gICAgbWFyZ2luOiAxZW07XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gIH1cclxuXHJcbiAgXHJcbiAgLnVzZXJkZXRhaWxzIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIH1cclxuICBcclxuICAudXNlcmRldGFpbHMgcCB7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDA7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIH1cclxuICBcclxuICAuY29udGVudCBwIHtcclxuICAgIHBhZGRpbmctbGVmdDogMS41ZW07XHJcbiAgfVxyXG4gIFxyXG4gIC51c2VyZGV0YWlscyBkaXYge1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQ7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gIC51c2VyZGV0YWlscyBpbWcge1xyXG4gICAgcGFkZGluZzogMDtcclxuICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcclxuICAgIG1hcmdpbjogMWVtIDA7XHJcbiAgICB3aWR0aDogNWVtO1xyXG4gICAgaGVpZ2h0OiA1ZW07XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZDtcclxuICB9XHJcbiAgXHJcbiAgLmZvb3RlciB7XHJcbiAgICBmb250LXNpemU6IDEuNWVtO1xyXG4gICAgYm9yZGVyLXRvcDogMXB4IGRhc2hlZDtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuICAgIGNvbG9yOiByZ2IoMCwgMTI4LCAxODIpO1xyXG4gIH1cclxuICBcclxuICAuZm9vdGVyIGkge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICB9XHJcbiAgXHJcbiAgLmZvb3RlciBwIHtcclxuICAgIHBhZGRpbmctbGVmdDogMC41ZW07XHJcbiAgfVxyXG4gIFxyXG4gIC5mb290ZXIgLmZhcy5mYS10aHVtYnMtdXAge1xyXG4gICAgY29sb3I6IGdyZWVuO1xyXG4gIH1cclxuICBcclxuICAuZm9vdGVyIC5mYXMuZmEtdGh1bWJzLWRvd24ge1xyXG4gICAgY29sb3I6IHJlZDtcclxuICB9XHJcbiAgXHJcbiAgLyogYW5zd2VyLWNvbW1lbnQgKi9cclxuICBcclxuICAuYW5zd2VyLWNvbW1lbnQge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICAvKiBkaXNwbGF5OiBmbGV4OyAqL1xyXG4gICAgbWFyZ2luLXRvcDogMWVtO1xyXG4gIH1cclxuICBcclxuICAuYW5zd2VyLWNvbW1lbnQgcCB7XHJcbiAgICBmbGV4LWJhc2lzOiAxNSU7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMC4zZW07XHJcbiAgfVxyXG4gIFxyXG4gIC5hbnN3ZXItY29tbWVudCBwIHNwYW4ge1xyXG4gICAgY29sb3I6IHJnYigwLCAxMjgsIDE4Mik7XHJcbiAgICBmb250LXNpemU6IDEuMmVtO1xyXG4gIH1cclxuICBcclxuICAuYW5zd2VyIHtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMC4zZW07XHJcbiAgICBmbGV4LWJhc2lzOiA4NSU7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gIC5hbnN3ZXIgdGV4dGFyZWEge1xyXG4gICAgd2lkdGg6IDkwJTtcclxuICAgIG1hcmdpbi10b3A6IDFyZW07XHJcbiAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07XHJcbiAgfVxyXG4gIFxyXG4gIC5hbnN3ZXIgYnV0dG9uIHtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIG1hcmdpbjogMC41ZW0gMWVtO1xyXG4gICAgcGFkZGluZzogMC4yZW0gMWVtO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQ7XHJcbiAgICBib3JkZXItcmFkaXVzOiAwLjNlbTtcclxuICB9XHJcbiAgXHJcbiAgLmFuc3dlciBidXR0b246aG92ZXIge1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIH1cclxuICBcclxuICAuY29tbWVudC1hcmVhIHtcclxuICAgIG1pbi13aWR0aDogMTAwJTtcclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpureFunction2","_c0","ctx_r3","book","rating","star_r6","ɵɵtext","ɵɵpureFunction1","_c1","ctx_r4","_id","ɵɵlistener","BookDetailsComponent_div_0_button_17_Template_button_click_0_listener","ɵɵrestoreView","_r8","ctx_r7","ɵɵnextContext","ɵɵresetView","onDeleteBook","ɵɵtemplate","BookDetailsComponent_div_0_span_12_Template","BookDetailsComponent_div_0_button_16_Template","BookDetailsComponent_div_0_button_17_Template","ɵɵpropertyInterpolate","ctx_r0","image","ɵɵsanitizeUrl","ɵɵtextInterpolate1","name","author","ɵɵpureFunction0","_c2","ɵɵtextInterpolate","description","isLogged","comment_r9","star_r11","BookDetailsComponent_div_1_span_8_Template","username","comment","BookDetailsComponent_div_4_span_9_Template_span_click_0_listener","restoredCtx","_r16","star_r14","$implicit","ctx_r15","setRating","ctx_r13","newCommentRating","BookDetailsComponent_div_4_Template_form_submit_6_listener","_r18","ctx_r17","onSubmitComment","BookDetailsComponent_div_4_Template_textarea_ngModelChange_7_listener","$event","ctx_r19","newCommentText","BookDetailsComponent_div_4_span_9_Template","ctx_r2","BookDetailsComponent","constructor","apiService","activatedRoute","userService","router","ngOnInit","fetchBook","fetchUser","id","snapshot","params","getBook","subscribe","commentList","length","totalRating","reduce","acc","getCurrentUserUsername","deleteBook","console","log","navigate","error","trim","bookId","currentUserId","getCurrentUserId","newComment","userId","push","updateBookWithComment","updatedBook","ɵɵdirectiveInject","i1","ApiService","i2","ActivatedRoute","i3","UserService","Router","selectors","decls","vars","consts","template","BookDetailsComponent_Template","rf","ctx","BookDetailsComponent_div_0_Template","BookDetailsComponent_div_1_Template","BookDetailsComponent_div_4_Template"],"sources":["D:\\JS\\AngularProjects\\fandom\\fandom\\src\\app\\categories\\book-details\\book-details.component.ts","D:\\JS\\AngularProjects\\fandom\\fandom\\src\\app\\categories\\book-details\\book-details.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/api.service';\nimport { Book } from 'src/app/types/book';\nimport { UserService } from 'src/app/user/user.service';\nimport { Comment } from 'src/app/types/comment';\nimport { User } from 'src/app/types/user';\n\n@Component({\n  selector: 'app-book-details',\n  templateUrl: './book-details.component.html',\n  styleUrls: ['./book-details.component.css']\n})\nexport class BookDetailsComponent implements OnInit {\n\n  book: Book | undefined;\n  newCommentText: string = '';\n  newCommentRating: number = 0;  \n  username: string = '';\n\n  constructor(\n    private apiService: ApiService,\n    private activatedRoute: ActivatedRoute,\n    private userService: UserService,\n    private router: Router\n  ) { }\n\n  get isLogged(): boolean {\n    return this.userService.isLogged;\n  }\n\n  ngOnInit(): void {\n    this.fetchBook();\n    this.fetchUser();\n\n  }\n\n  fetchBook(): void {\n    const id = this.activatedRoute.snapshot.params['id'];\n\n    this.apiService.getBook(id).subscribe((book) => {\n      this.book = book;\n\n      if(this.book.commentList && this.book.commentList.length > 0) {\n        const totalRating = this.book.commentList.reduce((acc, comment) => acc + comment.rating, 0);\n        this.book.rating = totalRating / this.book.commentList.length;\n      }\n    })\n  }\n\n  fetchUser(): void {\n    // const username = this.activatedRoute.snapshot.params['username'];\n\n    const username = this.userService.getCurrentUserUsername();\n    if(username){\n      this.username = username;\n    }\n  }\n\n  onDeleteBook(): void {\n    const id = this.activatedRoute.snapshot.params['id'];\n    this.apiService.deleteBook(id).subscribe(() => {\n      console.log('Book deleted successfully!');\n      this.router.navigate(['/books'])\n    },\n      (error) => {\n        console.error('Error deleting book:', error);\n      })\n  }\n\n \n\n  setRating(rating: number): void {\n    this.newCommentRating = rating;\n  }\n\n  onSubmitComment(): void {\n    if (this.newCommentText.trim() === '') {\n      return;\n    }    \n\n    const bookId = this.activatedRoute.snapshot.params['id'];\n    const currentUserId = this.userService.getCurrentUserId(); \n\n    if(currentUserId === null){\n      return;\n    }\n\n    const newComment: Comment = {      \n      comment: this.newCommentText,\n      userId: {_id :currentUserId} as User,\n     username: this.username,\n      bookId: bookId,\n      rating: this.newCommentRating\n    };\n\n    if (this.book) {\n      this.book.commentList.push(newComment);     \n   \n\n    this.apiService.updateBookWithComment(this.book).subscribe((updatedBook) => {\n      this.book = updatedBook;     \n\n      this.newCommentText = '';    \n      this.newCommentRating = 0;\n    })\n  }\n  }\n}\n","<div class=\"container\" *ngIf=\"book\">\n  <div class=\"row \">\n<div class=\"col-md-3\">\n    <div class=\"card shadow-effect\" style=\"padding: 0;\">\n      <img src={{book.image}} alt=\"Book Image\" class=\"img-fluid founded-start\" width=\"250\" height=\"250\">\n    </div>\n  </div>\n  <div class=\"col-md-9\">\n    <div class=\"card-body col-lg-10\">     \n\n      <h1 class=\"mt-3 mb-3\"> {{book.name}} </h1>\n      <h5 class=\"card-author\">by {{book.author}}</h5>\n      <div class=\"rating\">\n        <span *ngFor=\"let star of [1, 2, 3, 4, 5]\">\n          <i class=\"fa\" [ngClass]=\"{'fa-star': book.rating >= star, 'fa-star-o': book.rating < star}\"></i>\n        </span>\n      </div>\n      <p>\n      \n    </p>\n      <p>{{book.description}}</p>\n      <button *ngIf=\"isLogged\" class=\"btn-info\" [routerLink]=\"['/books',book._id,'editBook']\">Update Info</button>\n      <button *ngIf=\"isLogged\" class=\"btn-delete ml-2\" (click)=\"onDeleteBook()\">Delete Book</button>\n    </div>\n  </div>  \n</div>\n</div>\n\n<div class=\"comment\" *ngFor=\"let comment of book?.commentList\">\n<div class=\"comment-main\">\n  <div class=\"user\">\n    <img src=\"/assets/profile.png\" alt=\"avatar\" width=\"50\" height=\"50\"/>\n    <div>{{ comment.username }}</div>\n  </div>\n  <div class=\"content\">\n    <div class=\"rating\">\n      <span *ngFor=\"let star of [1, 2, 3, 4, 5]\">\n        <i class=\"fa\" [ngClass]=\"{'fa-star': comment.rating >= star, 'fa-star-o': comment.rating < star}\"></i>\n      </span>\n    </div>\n    <p>\n      {{ comment.comment }}\n    </p>\n  </div>\n</div>\n</div>\n\n\n<div class=\"col-md-3\"></div>\n<div class=\"col-md-9\">\n<div class=\"leave-comment\" *ngIf=\"isLogged\">\n  <p><span>{{username}}</span> comment:</p>\n  <div class=\"answer\">\n    <form (submit)=\"onSubmitComment()\">\n      <textarea name=\"commentText\" [(ngModel)]=\"newCommentText\" id=\"comment\" cols=\"30\" rows=\"10\"></textarea>\n      <div class=\"rating\">\n        <span *ngFor=\"let star of [1, 2, 3, 4, 5]\" (click)=\"setRating(star)\">\n          <i class=\"fa\" [ngClass]=\"{'fa-star': newCommentRating >= star, 'fa-star-o': newCommentRating < star}\"></i>\n        </span>\n      </div>      \n      <button type=\"submit\" class=\"btn-comment\">Leave a Comment</button>\n    </form>\n  </div>\n</div>\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<!-- <div class=\"container\" *ngIf=\"book\">\n   \n    <div class=\"theme-content\">\n     \n      <div class=\"theme-title\">\n        <div class=\"theme-name-wrapper\">\n            <img src={{book.image}} alt=\"avatar\" width=\"150\" height=\"200\"/>\n          <div class=\"theme-name\">\n            <h2>{{ book.name }}</h2>\n            <p>\n              Date: <time>{{ book.published }}</time>\n            </p>\n          </div>\n          <div class=\"subscribers\">\n            <p>\n              Subscribers: <span>{{ book.commentList.length }}</span>\n            </p>\n            <button class=\"subscribe\">Subscribe</button>\n                      <button class=\"unsubscribe\">Unsubscribe</button> -->\n<!-- </div>\n        </div>\n      </div> -->\n\n<!-- comment \n      <div class=\"comment\" *ngFor=\"let post of book.posts\">\n        <header class=\"header\">\n          <p>\n            <span>{{ post.userId.username }}</span> posted on\n            <time>{{ post.created_at }}</time>\n          </p>\n        </header>\n        <div class=\"comment-main\">\n          <div class=\"userdetails\">\n            <img src=\"/assets/profile.png\" alt=\"avatar\" />\n          </div>\n          <div class=\"post-content\">\n            <p>\n              {{ post.text }}\n            </p>\n          </div>\n        </div>\n        <div class=\"footer\">\n          <i class=\"fas fa-thumbs-up\"></i>\n                  <i class=\"fas fa-thumbs-down\"></i>\n           <p>\n            <span> {{ post.likes.length }}</span> likes\n          </p> \n        </div>\n      </div>\n  \n      <button *ngIf=\"isLogged\" class=\"subscribe\" [routerLink]=\"['/books',book._id,'editBook']\">Update Info</button>\n      <button *ngIf=\"isLogged\" class=\"subscribe\" (click)=\"onDeleteBook()\">Delete Book</button>\n\n      <div class=\"answer-comment\" *ngIf=\"isLogged\">     \n\n        <p><span>currentUser</span> comment:</p>\n        <div class=\"answer\">\n          <form>\n            <textarea name=\"postText\" id=\"comment\" cols=\"30\" rows=\"10\"></textarea>\n            <button>Post</button>\n          </form>\n        </div>\n      </div> -->\n<!-- </div>\n  </div> -->"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}