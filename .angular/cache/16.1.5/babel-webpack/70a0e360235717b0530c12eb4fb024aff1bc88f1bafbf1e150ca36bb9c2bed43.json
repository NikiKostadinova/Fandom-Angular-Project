{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/user/user.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction CommentsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\", 4);\n    i0.ɵɵtext(2, \" Be the first to leave a comment!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"fa-star\": a0,\n    \"fa-star-o\": a1\n  };\n};\nfunction CommentsComponent_div_4_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"i\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const star_r5 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, ctx_r3.book.rating >= star_r5, ctx_r3.book.rating < star_r5));\n  }\n}\nfunction CommentsComponent_div_4_div_7_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"i\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const star_r9 = ctx.$implicit;\n    const comment_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, comment_r6.rating >= star_r9, comment_r6.rating < star_r9));\n  }\n}\nfunction CommentsComponent_div_4_div_7_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 21);\n    i0.ɵɵlistener(\"click\", function CommentsComponent_div_4_div_7_span_13_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r11.toggleComment());\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.showFullDescription ? \"Read less\" : \"Read more\", \" \");\n  }\n}\nconst _c1 = function () {\n  return [1, 2, 3, 4, 5];\n};\nfunction CommentsComponent_div_4_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"div\", 14);\n    i0.ɵɵelement(3, \"img\", 15);\n    i0.ɵɵelementStart(4, \"div\", 16);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 17)(7, \"div\", 18);\n    i0.ɵɵtemplate(8, CommentsComponent_div_4_div_7_span_8_Template, 2, 4, \"span\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 19)(10, \"p\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"slice\");\n    i0.ɵɵtemplate(13, CommentsComponent_div_4_div_7_span_13_Template, 2, 1, \"span\", 20);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const comment_r6 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(comment_r6.username);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(8, _c1));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.showFullDescription ? comment_r6.comment : i0.ɵɵpipeBind3(12, 4, comment_r6.comment, 0, ctx_r4.truncatedCommentLength), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", comment_r6.comment.length > ctx_r4.truncatedCommentLength);\n  }\n}\nconst _c2 = function (a1) {\n  return [\"/books\", a1];\n};\nfunction CommentsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 5);\n    i0.ɵɵelement(2, \"img\", 6);\n    i0.ɵɵelementStart(3, \"div\", 7);\n    i0.ɵɵtemplate(4, CommentsComponent_div_4_span_4_Template, 2, 4, \"span\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 9);\n    i0.ɵɵtext(6, \"Back to Details\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, CommentsComponent_div_4_div_7_Template, 14, 9, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r1.book.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(4, _c1));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c2, ctx_r1.book._id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.commentsList);\n  }\n}\nfunction CommentsComponent_div_5_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 28);\n    i0.ɵɵlistener(\"click\", function CommentsComponent_div_5_span_9_Template_span_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const star_r14 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.setRating(star_r14));\n    });\n    i0.ɵɵelement(1, \"i\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const star_r14 = ctx.$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, ctx_r13.newCommentRating >= star_r14, ctx_r13.newCommentRating < star_r14));\n  }\n}\nfunction CommentsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"p\")(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" comment: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 23)(6, \"form\", 24);\n    i0.ɵɵlistener(\"submit\", function CommentsComponent_div_5_Template_form_submit_6_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onSubmitComment());\n    });\n    i0.ɵɵelementStart(7, \"textarea\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function CommentsComponent_div_5_Template_textarea_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.newCommentText = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 18);\n    i0.ɵɵtemplate(9, CommentsComponent_div_5_span_9_Template, 2, 4, \"span\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 27);\n    i0.ɵɵtext(11, \"Leave a Comment\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.username);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newCommentText);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(3, _c1));\n  }\n}\n// import { SlicePipe } from '@angular/common';\nexport class CommentsComponent {\n  constructor(apiService, route, userService, router) {\n    this.apiService = apiService;\n    this.route = route;\n    this.userService = userService;\n    this.router = router;\n    this.commentsList = [];\n    this.thereAreNoComments = false;\n    this.newCommentText = '';\n    this.newCommentRating = 0;\n    this.username = '';\n    this.truncatedCommentLength = 50;\n    this.showFullDescription = false;\n    this.activatedRoute = route;\n  }\n  ngOnInit() {\n    window.scrollTo(0, 0);\n    this.fetchUser();\n    const bookId = this.route.snapshot.paramMap.get('id');\n    if (bookId) {\n      this.apiService.getBook(bookId).subscribe(book => {\n        this.book = book;\n      });\n      this.apiService.getBookComments(bookId).subscribe(comments => {\n        this.commentsList = comments;\n        if (this.commentsList.length === 0) {\n          this.thereAreNoComments = true;\n        }\n      });\n    }\n  }\n  toggleComment() {\n    this.showFullDescription = !this.showFullDescription;\n  }\n  fetchUser() {\n    const username = this.userService.getCurrentUserUsername();\n    if (username) {\n      this.username = username;\n    }\n  }\n  setRating(rating) {\n    this.newCommentRating = rating;\n  }\n  onSubmitComment() {\n    if (this.newCommentText.trim() === '') {\n      return;\n    }\n    const bookId = this.activatedRoute.snapshot.params['id'];\n    const bookName = this.activatedRoute.snapshot.params['name'];\n    const currentUserId = this.userService.getCurrentUserId();\n    if (currentUserId === null) {\n      return;\n    }\n    const newComment = {\n      comment: this.newCommentText,\n      userId: {\n        _id: currentUserId\n      },\n      username: this.username,\n      bookId: bookId,\n      bookName: bookName,\n      rating: this.newCommentRating\n    };\n    if (this.book) {\n      this.book.commentList.push(newComment);\n      this.apiService.updateBookWithComment(this.book).subscribe(updatedBook => {\n        this.book = updatedBook;\n        this.newCommentText = '';\n        this.newCommentRating = 0;\n        window.location.reload();\n      });\n    }\n  }\n}\nCommentsComponent.ɵfac = function CommentsComponent_Factory(t) {\n  return new (t || CommentsComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i2.Router));\n};\nCommentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CommentsComponent,\n  selectors: [[\"app-comments\"]],\n  decls: 6,\n  vars: 3,\n  consts: [[1, \"aside\"], [4, \"ngIf\"], [1, \"container\"], [\"class\", \"leave-comment\", 4, \"ngIf\"], [1, \"no-comments\"], [1, \"card\", 2, \"padding\", \"0\"], [\"alt\", \"Book Image\", \"width\", \"250\", \"height\", \"250\", 1, \"img-fluid\", \"founded-start\", 3, \"src\"], [1, \"rating-img\"], [4, \"ngFor\", \"ngForOf\"], [1, \"button-like\", 3, \"routerLink\"], [\"class\", \"comment \", \"class\", \"aside-book\", 4, \"ngFor\", \"ngForOf\"], [1, \"fa\", 3, \"ngClass\"], [1, \"aside-book\"], [1, \"comment-main\", \"row\", \"align-items-start\"], [1, \"col-md-2\"], [\"src\", \"/assets/profile.png\", \"alt\", \"avatar\", \"width\", \"50\", \"height\", \"50\", 1, \"userName-img\"], [1, \"userName\"], [1, \"col-md-9\", \"ml-5\"], [1, \"rating\"], [1, \"comment-content\"], [\"class\", \"read-toggle\", 3, \"click\", 4, \"ngIf\"], [1, \"read-toggle\", 3, \"click\"], [1, \"leave-comment\"], [1, \"answer\"], [1, \"submit\", 3, \"submit\"], [\"name\", \"commentText\", \"id\", \"comment\", \"cols\", \"30\", \"rows\", \"10\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 1, \"btn-comment\"], [3, \"click\"]],\n  template: function CommentsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"aside\")(1, \"div\", 0);\n      i0.ɵɵtemplate(2, CommentsComponent_div_2_Template, 3, 0, \"div\", 1);\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, CommentsComponent_div_4_Template, 8, 7, \"div\", 1);\n      i0.ɵɵtemplate(5, CommentsComponent_div_5_Template, 12, 4, \"div\", 3);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.thereAreNoComments);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.book);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.book);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i2.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm, i4.SlicePipe],\n  styles: [\".aside[_ngcontent-%COMP%]{\\n  margin-top: 100px;\\n  min-height: 800px;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  margin-left: -100px;\\n  bottom: 130px; \\n  z-index: 1;\\n  position: fixed;\\n  background-color: rgba(254, 254, 254, 0);\\n  \\n\\n  border: none;\\n\\n  \\n\\n\\n}\\n\\n.comment-main[_ngcontent-%COMP%] {\\n  margin-left: 200px;\\n  margin-top: 1em;\\n  border: 1px solid;\\n  border-radius: 0.3em;\\n  width: 690px;\\n  padding: 1em;\\n  background-color: azure;\\n\\n}\\n\\n.container[_ngcontent-%COMP%]{\\n  margin-top: 150px;\\n}\\n\\n.no-comments[_ngcontent-%COMP%] {\\n  color: azure;\\n  font-family: 'Cinzel Decorative', cursive;\\n  font-size: 30px;\\n  position: absolute;\\n justify-content: center;\\n margin-top: -10px;\\n margin-left: 150px;\\n \\n \\n  top: 150px;\\n  text-shadow: rgb(0, 242, 255) 1px 0 10px;\\n}\\n\\n.read-toggle[_ngcontent-%COMP%] {\\n  color: blue;\\n  cursor: pointer;\\n}\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.content[_ngcontent-%COMP%] {\\n  margin-left: 100px;\\n  \\n\\n  display: flex;\\n  color: rgba(59, 65, 66, 0.996);\\n  flex-direction: column;\\n}\\n\\n.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  padding-left: 1.5em;\\n}\\n\\n\\n.rating-img[_ngcontent-%COMP%] {\\n  font-size: 30px;\\n  padding-left: 1.5em;\\n  color: rgb(227, 199, 147);\\n  margin-left: 10px;\\n  margin-top: 20px;\\n  \\n\\n\\n}\\n\\n.rating[_ngcontent-%COMP%] {\\n  font-size: 15px;\\n  padding-left: 1.5em;\\n  color: orange;\\n  margin-right: 10px;\\n\\n}\\n\\n.star[_ngcontent-%COMP%] {\\n  color: orange;\\n  cursor: pointer;\\n}\\n\\n.full[_ngcontent-%COMP%]::before {\\n  content: \\\"\\\\2605\\\";\\n  \\n\\n\\n}\\n\\n.empty[_ngcontent-%COMP%]::before {\\n  content: \\\"\\\\2606\\\";\\n  \\n\\n}\\n\\n.fa[_ngcontent-%COMP%] {\\n  color: orange;\\n}\\n\\n\\n.button-like[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  padding: 10px 20px;\\n  background-color: rgb(99, 138, 138);\\n  color: rgb(235, 251, 251);\\n  cursor: pointer;\\n  border: none;\\n  border-radius: 5px;\\n  text-align: center;\\n  \\n\\n  font-size: 20px;\\n}\\n\\n.button-like[_ngcontent-%COMP%]:hover {\\n  background-color: #62acab;\\n}\\n\\n\\n\\n\\n\\n.leave-comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin-bottom: 0px;\\n\\n}\\n\\n\\n.answer-comment[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  margin-top: 1em;\\n}\\n\\n.answer-comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n  flex-basis: 15%;\\n  padding-bottom: 0.3em;\\n}\\n\\n.answer-comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n\\n  color: rgba(59, 65, 66, 0.996);\\n  font-size: 1.2em;\\n}\\n\\n.answer[_ngcontent-%COMP%] {\\n  \\n\\n  border-radius: 0.3em;\\n  flex-basis: 85%;\\n  text-align: center;\\n  margin-bottom: 10px;\\n}\\n\\n.answer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  width: 90%;\\n  margin-top: 1rem;\\n  border-radius: 0.5rem;\\n}\\n\\n.answer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  color: rgba(59, 65, 66, 0.996);\\n  background-color: rgb(171, 201, 206);\\n  margin: 0.5em 1em;\\n  margin-left: 20px;\\n  padding: 0.5em 1em;\\n  border: none;\\n  border-radius: 0.3em;\\n}\\n\\n.leave-comment[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-family: 'Raleway', sans-serif;\\n  color: rgba(59, 65, 66, 0.996);\\n  font-size: large;\\n  font-weight: 500;\\n  margin-left: 5px;\\n  margin-right: 5px;\\n}\\n\\n.leave-comment[_ngcontent-%COMP%] {\\n  margin-left: 200px;\\n  margin-top: 10px;\\n  background-color: azure;\\n  color: rgb(47, 97, 80);\\n  width: 690px;\\n\\n\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2F0ZWdvcmllcy9jb21tZW50cy9jb21tZW50cy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtFQUNFLGlCQUFpQjtFQUNqQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLFVBQVU7RUFDVixlQUFlO0VBQ2Ysd0NBQXdDO0VBQ3hDLHlCQUF5QjtFQUN6QixZQUFZOztFQUVaO2lCQUNlO0FBQ2pCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsb0JBQW9CO0VBQ3BCLFlBQVk7RUFDWixZQUFZO0VBQ1osdUJBQXVCOztBQUV6Qjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLFlBQVk7RUFDWix5Q0FBeUM7RUFDekMsZUFBZTtFQUNmLGtCQUFrQjtDQUNuQix1QkFBdUI7Q0FDdkIsaUJBQWlCO0NBQ2pCLGtCQUFrQjs7O0VBR2pCLFVBQVU7RUFDVix3Q0FBd0M7QUFDMUM7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsZUFBZTtBQUNqQjs7QUFFQTs7R0FFRzs7Ozs7QUFLSDtFQUNFLGtCQUFrQjtFQUNsQixpQkFBaUI7RUFDakIsYUFBYTtFQUNiLDhCQUE4QjtFQUM5QixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7OztBQUdBO0VBQ0UsZUFBZTtFQUNmLG1CQUFtQjtFQUNuQix5QkFBeUI7RUFDekIsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixnREFBZ0Q7O0FBRWxEOztBQUVBO0VBQ0UsZUFBZTtFQUNmLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2Isa0JBQWtCOztBQUVwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLDhCQUE4Qjs7QUFFaEM7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0UsYUFBYTtBQUNmOzs7QUFHQTtFQUNFLHFCQUFxQjtFQUNyQixrQkFBa0I7RUFDbEIsbUNBQW1DO0VBQ25DLHlCQUF5QjtFQUN6QixlQUFlO0VBQ2YsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsOENBQThDO0VBQzlDLGVBQWU7QUFDakI7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7OztBQUdBLGtCQUFrQjs7QUFFbEI7RUFDRSxrQkFBa0I7O0FBRXBCOzs7QUFHQTtFQUNFLFdBQVc7RUFDWCxhQUFhO0VBQ2IsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YscUJBQXFCO0FBQ3ZCOztBQUVBOztFQUVFLDhCQUE4QjtFQUM5QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsb0JBQW9CO0VBQ3BCLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsVUFBVTtFQUNWLGdCQUFnQjtFQUNoQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSw4QkFBOEI7RUFDOUIsb0NBQW9DO0VBQ3BDLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQ0FBa0M7RUFDbEMsOEJBQThCO0VBQzlCLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsdUJBQXVCO0VBQ3ZCLHNCQUFzQjtFQUN0QixZQUFZOzs7QUFHZCIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4uYXNpZGV7XHJcbiAgbWFyZ2luLXRvcDogMTAwcHg7XHJcbiAgbWluLWhlaWdodDogODAwcHg7XHJcbn1cclxuXHJcbi5jYXJkIHtcclxuICBtYXJnaW4tbGVmdDogLTEwMHB4O1xyXG4gIGJvdHRvbTogMTMwcHg7IFxyXG4gIHotaW5kZXg6IDE7XHJcbiAgcG9zaXRpb246IGZpeGVkO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU0LCAyNTQsIDI1NCwgMCk7XHJcbiAgLyogYm9yZGVyLXJhZGl1czogMTBweDsgKi9cclxuICBib3JkZXI6IG5vbmU7XHJcblxyXG4gIC8qIHdpZHRoOiAyNTBweDtcclxuICBoZWlnaHQ6IGF1dG87ICovXHJcbn1cclxuXHJcbi5jb21tZW50LW1haW4ge1xyXG4gIG1hcmdpbi1sZWZ0OiAyMDBweDtcclxuICBtYXJnaW4tdG9wOiAxZW07XHJcbiAgYm9yZGVyOiAxcHggc29saWQ7XHJcbiAgYm9yZGVyLXJhZGl1czogMC4zZW07XHJcbiAgd2lkdGg6IDY5MHB4O1xyXG4gIHBhZGRpbmc6IDFlbTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBhenVyZTtcclxuXHJcbn1cclxuXHJcbi5jb250YWluZXJ7XHJcbiAgbWFyZ2luLXRvcDogMTUwcHg7XHJcbn1cclxuXHJcbi5uby1jb21tZW50cyB7XHJcbiAgY29sb3I6IGF6dXJlO1xyXG4gIGZvbnQtZmFtaWx5OiAnQ2luemVsIERlY29yYXRpdmUnLCBjdXJzaXZlO1xyXG4gIGZvbnQtc2l6ZTogMzBweDtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuIG1hcmdpbi10b3A6IC0xMHB4O1xyXG4gbWFyZ2luLWxlZnQ6IDE1MHB4O1xyXG4gXHJcbiBcclxuICB0b3A6IDE1MHB4O1xyXG4gIHRleHQtc2hhZG93OiByZ2IoMCwgMjQyLCAyNTUpIDFweCAwIDEwcHg7XHJcbn1cclxuXHJcbi5yZWFkLXRvZ2dsZSB7XHJcbiAgY29sb3I6IGJsdWU7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4vKiAuY29udGFpbmVye1xyXG4gIG1hcmdpbi10b3A6IDUwcHg7XHJcbn0gKi9cclxuXHJcblxyXG5cclxuXHJcbi5jb250ZW50IHtcclxuICBtYXJnaW4tbGVmdDogMTAwcHg7XHJcbiAgLyogbWFyZ2luOiAxZW07ICovXHJcbiAgZGlzcGxheTogZmxleDtcclxuICBjb2xvcjogcmdiYSg1OSwgNjUsIDY2LCAwLjk5Nik7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG5cclxuLmNvbnRlbnQgcCB7XHJcbiAgcGFkZGluZy1sZWZ0OiAxLjVlbTtcclxufVxyXG5cclxuXHJcbi5yYXRpbmctaW1nIHtcclxuICBmb250LXNpemU6IDMwcHg7XHJcbiAgcGFkZGluZy1sZWZ0OiAxLjVlbTtcclxuICBjb2xvcjogcmdiKDIyNywgMTk5LCAxNDcpO1xyXG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgLyogdGV4dC1zaGFkb3c6IHJnYigyMzUsIDI0MCwgMjE0KSAxcHggMCAxMHB4OyAqL1xyXG5cclxufVxyXG5cclxuLnJhdGluZyB7XHJcbiAgZm9udC1zaXplOiAxNXB4O1xyXG4gIHBhZGRpbmctbGVmdDogMS41ZW07XHJcbiAgY29sb3I6IG9yYW5nZTtcclxuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcblxyXG59XHJcblxyXG4uc3RhciB7XHJcbiAgY29sb3I6IG9yYW5nZTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5mdWxsOjpiZWZvcmUge1xyXG4gIGNvbnRlbnQ6IFwiXFwyNjA1XCI7XHJcbiAgLyogVW5pY29kZSBmb3IgYSBmaWxsZWQgc3RhciAqL1xyXG5cclxufVxyXG5cclxuLmVtcHR5OjpiZWZvcmUge1xyXG4gIGNvbnRlbnQ6IFwiXFwyNjA2XCI7XHJcbiAgLyogVW5pY29kZSBmb3IgYW4gZW1wdHkgc3RhciAqL1xyXG59XHJcblxyXG4uZmEge1xyXG4gIGNvbG9yOiBvcmFuZ2U7XHJcbn1cclxuXHJcblxyXG4uYnV0dG9uLWxpa2Uge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDk5LCAxMzgsIDEzOCk7XHJcbiAgY29sb3I6IHJnYigyMzUsIDI1MSwgMjUxKTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgLyogdGV4dC1zaGFkb3c6IHJnYigwLCAyNDIsIDI1NSkgMXB4IDAgMTBweDsgKi9cclxuICBmb250LXNpemU6IDIwcHg7XHJcbn1cclxuXHJcbi5idXR0b24tbGlrZTpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzYyYWNhYjtcclxufVxyXG5cclxuXHJcbi8qIGxlYXZlLWNvbW1lbnQgKi9cclxuXHJcbi5sZWF2ZS1jb21tZW50IHAge1xyXG4gIG1hcmdpbi1ib3R0b206IDBweDtcclxuXHJcbn1cclxuXHJcblxyXG4uYW5zd2VyLWNvbW1lbnQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgbWFyZ2luLXRvcDogMWVtO1xyXG59XHJcblxyXG4uYW5zd2VyLWNvbW1lbnQgcCB7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBmbGV4LWJhc2lzOiAxNSU7XHJcbiAgcGFkZGluZy1ib3R0b206IDAuM2VtO1xyXG59XHJcblxyXG4uYW5zd2VyLWNvbW1lbnQgcCBzcGFuIHtcclxuXHJcbiAgY29sb3I6IHJnYmEoNTksIDY1LCA2NiwgMC45OTYpO1xyXG4gIGZvbnQtc2l6ZTogMS4yZW07XHJcbn1cclxuXHJcbi5hbnN3ZXIge1xyXG4gIC8qIGJvcmRlcjogMXB4IHNvbGlkOyAqL1xyXG4gIGJvcmRlci1yYWRpdXM6IDAuM2VtO1xyXG4gIGZsZXgtYmFzaXM6IDg1JTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG5cclxuLmFuc3dlciB0ZXh0YXJlYSB7XHJcbiAgd2lkdGg6IDkwJTtcclxuICBtYXJnaW4tdG9wOiAxcmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcclxufVxyXG5cclxuLmFuc3dlciBidXR0b24ge1xyXG4gIGNvbG9yOiByZ2JhKDU5LCA2NSwgNjYsIDAuOTk2KTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTcxLCAyMDEsIDIwNik7XHJcbiAgbWFyZ2luOiAwLjVlbSAxZW07XHJcbiAgbWFyZ2luLWxlZnQ6IDIwcHg7XHJcbiAgcGFkZGluZzogMC41ZW0gMWVtO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiAwLjNlbTtcclxufVxyXG5cclxuLmxlYXZlLWNvbW1lbnQgc3BhbiB7XHJcbiAgZm9udC1mYW1pbHk6ICdSYWxld2F5Jywgc2Fucy1zZXJpZjtcclxuICBjb2xvcjogcmdiYSg1OSwgNjUsIDY2LCAwLjk5Nik7XHJcbiAgZm9udC1zaXplOiBsYXJnZTtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbn1cclxuXHJcbi5sZWF2ZS1jb21tZW50IHtcclxuICBtYXJnaW4tbGVmdDogMjAwcHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBhenVyZTtcclxuICBjb2xvcjogcmdiKDQ3LCA5NywgODApO1xyXG4gIHdpZHRoOiA2OTBweDtcclxuXHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty","ɵɵpureFunction2","_c0","ctx_r3","book","rating","star_r5","comment_r6","star_r9","ɵɵlistener","CommentsComponent_div_4_div_7_span_13_Template_span_click_0_listener","ɵɵrestoreView","_r12","ctx_r11","ɵɵnextContext","ɵɵresetView","toggleComment","ɵɵtextInterpolate1","ctx_r8","showFullDescription","ɵɵtemplate","CommentsComponent_div_4_div_7_span_8_Template","CommentsComponent_div_4_div_7_span_13_Template","ɵɵtextInterpolate","username","ɵɵpureFunction0","_c1","ctx_r4","comment","ɵɵpipeBind3","truncatedCommentLength","length","CommentsComponent_div_4_span_4_Template","CommentsComponent_div_4_div_7_Template","ɵɵpropertyInterpolate","ctx_r1","image","ɵɵsanitizeUrl","ɵɵpureFunction1","_c2","_id","commentsList","CommentsComponent_div_5_span_9_Template_span_click_0_listener","restoredCtx","_r16","star_r14","$implicit","ctx_r15","setRating","ctx_r13","newCommentRating","CommentsComponent_div_5_Template_form_submit_6_listener","_r18","ctx_r17","onSubmitComment","CommentsComponent_div_5_Template_textarea_ngModelChange_7_listener","$event","ctx_r19","newCommentText","CommentsComponent_div_5_span_9_Template","ctx_r2","CommentsComponent","constructor","apiService","route","userService","router","thereAreNoComments","activatedRoute","ngOnInit","window","scrollTo","fetchUser","bookId","snapshot","paramMap","get","getBook","subscribe","getBookComments","comments","getCurrentUserUsername","trim","params","bookName","currentUserId","getCurrentUserId","newComment","userId","commentList","push","updateBookWithComment","updatedBook","location","reload","ɵɵdirectiveInject","i1","ApiService","i2","ActivatedRoute","i3","UserService","Router","selectors","decls","vars","consts","template","CommentsComponent_Template","rf","ctx","CommentsComponent_div_2_Template","CommentsComponent_div_4_Template","CommentsComponent_div_5_Template"],"sources":["D:\\JS\\AngularProjects\\fandom\\fandom\\src\\app\\categories\\comments\\comments.component.ts","D:\\JS\\AngularProjects\\fandom\\fandom\\src\\app\\categories\\comments\\comments.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ApiService } from '../../api.service';\nimport { Comment } from '../../types/comment';\nimport { Book } from '../../types/book';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { UserService } from 'src/app/user/user.service';\nimport { User } from 'src/app/types/user';\n// import { SlicePipe } from '@angular/common';\n\n\n@Component({\n  selector: 'app-comments',\n  templateUrl: './comments.component.html',\n  styleUrls: ['./comments.component.css']\n})\nexport class CommentsComponent implements OnInit {\n  commentsList: Comment[] = [];\n  thereAreNoComments: boolean = false;\n  book: Book | undefined;\n  newCommentText: string = '';\n  newCommentRating: number = 0;  \n  username: string = '';\n  activatedRoute: any;\n  \n\n  truncatedCommentLength: number = 50;\n  showFullDescription: boolean = false;\n\n  constructor(private apiService: ApiService, private route: ActivatedRoute,private userService: UserService,\n    private router: Router) { \n      this.activatedRoute = route;\n    }\n\n  ngOnInit(): void {\n    window.scrollTo(0, 0); \n    this.fetchUser();\n\n    const bookId = this.route.snapshot.paramMap.get('id');\n   \n\n    if (bookId) {\n      this.apiService.getBook(bookId).subscribe((book) => {\n        this.book = book; \n      })\n      this.apiService.getBookComments(bookId).subscribe((comments) => {\n       \n        this.commentsList = comments;\n\n        if (this.commentsList.length === 0) {\n          this.thereAreNoComments = true;\n        }\n      });\n    }\n\n\n  }\n\n  toggleComment() {\n    this.showFullDescription = !this.showFullDescription;\n  }\n\n  fetchUser(): void {\n    \n    const username = this.userService.getCurrentUserUsername();\n    if(username){\n      this.username = username;\n    }\n  }\n\n  setRating(rating: number): void {\n    this.newCommentRating = rating;\n  }\n\n  onSubmitComment(): void {\n    if (this.newCommentText.trim() === '') {\n      return;\n    }    \n      \n    const bookId = this.activatedRoute.snapshot.params['id'];   \n    const bookName = this.activatedRoute.snapshot.params['name'];\n    const currentUserId = this.userService.getCurrentUserId(); \n    if(currentUserId === null){\n      return;\n    }\n\n    const newComment: Comment = {      \n      comment: this.newCommentText,\n      userId: {_id :currentUserId} as User,\n     username: this.username,\n      bookId: bookId,\n      bookName:bookName,\n      rating: this.newCommentRating\n    };\n\n    if (this.book) {\n      this.book.commentList.push(newComment);     \n   \n\n    this.apiService.updateBookWithComment(this.book).subscribe((updatedBook) => {\n      this.book = updatedBook;     \n      this.newCommentText = '';    \n      this.newCommentRating = 0;\n\n      window.location.reload();\n    })\n  }\n  }\n}\n\n\n","<aside>\n    <div class=\"aside\">\n        <div *ngIf=\"thereAreNoComments\">\n            <h3 class=\"no-comments\"> Be the first to leave a comment!</h3>\n        </div>\n\n        <div class=\"container\">\n            <div *ngIf=\"book\">\n                <div class=\"card \" style=\"padding: 0;\">\n                    <img src={{book.image}} alt=\"Book Image\" class=\"img-fluid founded-start\" width=\"250\" height=\"250\">\n\n                    <div class=\"rating-img\">\n                        <span *ngFor=\"let star of [1, 2, 3, 4, 5]\">\n                            <i class=\"fa\"\n                                [ngClass]=\"{'fa-star': book.rating >= star, 'fa-star-o': book.rating < star}\"></i>\n                        </span>\n                    </div>\n                    <div class=\"button-like\" [routerLink]=\"['/books',book._id]\">Back to Details</div>\n                </div>\n                <div class=\"comment \" *ngFor=\"let comment of commentsList\" class=\"aside-book\">\n\n                    <div class=\"comment-main row align-items-start\">\n                        <div class=\"col-md-2\">\n                            <img class=\"userName-img\" src=\"/assets/profile.png\" alt=\"avatar\" width=\"50\" height=\"50\" />\n                            <div class=\"userName\">{{ comment.username }}</div>\n                        </div>\n                        <div class=\"col-md-9 ml-5\">\n                            <div class=\"rating\">\n                                <span *ngFor=\"let star of [1, 2, 3, 4, 5]\">\n                                    <i class=\"fa\"\n                                        [ngClass]=\"{'fa-star': comment.rating >= star, 'fa-star-o': comment.rating < star}\"></i>\n                                </span>\n                            </div>\n                            <div class=\"comment-content\">\n                                <p>\n                                    {{ showFullDescription ? comment.comment : (comment.comment |\n                                    slice:0:truncatedCommentLength)}}\n                                    <span class=\"read-toggle\" *ngIf=\"comment.comment.length > truncatedCommentLength\"\n                                        (click)=\"toggleComment()\">\n                                        {{ showFullDescription ? 'Read less' : 'Read more' }}\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\n            </div>\n\n            <div class=\"leave-comment\" *ngIf=\"book\">\n                <p><span>{{username}}</span> comment:\n                </p>\n                <div class=\"answer\">\n                    <form class=\"submit\" (submit)=\"onSubmitComment()\">\n                        <textarea name=\"commentText\" [(ngModel)]=\"newCommentText\" id=\"comment\" cols=\"30\"\n                            rows=\"10\"></textarea>\n                        <div class=\"rating\">\n                            <span *ngFor=\"let star of [1, 2, 3, 4, 5]\" (click)=\"setRating(star)\">\n                                <i class=\"fa\"\n                                    [ngClass]=\"{'fa-star': newCommentRating >= star, 'fa-star-o': newCommentRating < star}\"></i>\n                            </span>\n                        </div>\n                        <button type=\"submit\" class=\"btn-comment\">Leave a Comment</button>\n                    </form>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</aside>"],"mappings":";;;;;;;;ICEQA,EAAA,CAAAC,cAAA,UAAgC;IACHD,EAAA,CAAAE,MAAA,wCAAgC;IAAAF,EAAA,CAAAG,YAAA,EAAK;;;;;;;;;;;IASlDH,EAAA,CAAAC,cAAA,WAA2C;IACvCD,EAAA,CAAAI,SAAA,YACsF;IAC1FJ,EAAA,CAAAG,YAAA,EAAO;;;;;IADCH,EAAA,CAAAK,SAAA,GAA6E;IAA7EL,EAAA,CAAAM,UAAA,YAAAN,EAAA,CAAAO,eAAA,IAAAC,GAAA,EAAAC,MAAA,CAAAC,IAAA,CAAAC,MAAA,IAAAC,OAAA,EAAAH,MAAA,CAAAC,IAAA,CAAAC,MAAA,GAAAC,OAAA,EAA6E;;;;;IAc7EZ,EAAA,CAAAC,cAAA,WAA2C;IACvCD,EAAA,CAAAI,SAAA,YAC4F;IAChGJ,EAAA,CAAAG,YAAA,EAAO;;;;;IADCH,EAAA,CAAAK,SAAA,GAAmF;IAAnFL,EAAA,CAAAM,UAAA,YAAAN,EAAA,CAAAO,eAAA,IAAAC,GAAA,EAAAK,UAAA,CAAAF,MAAA,IAAAG,OAAA,EAAAD,UAAA,CAAAF,MAAA,GAAAG,OAAA,EAAmF;;;;;;IAOvFd,EAAA,CAAAC,cAAA,eAC8B;IAA1BD,EAAA,CAAAe,UAAA,mBAAAC,qEAAA;MAAAhB,EAAA,CAAAiB,aAAA,CAAAC,IAAA;MAAA,MAAAC,OAAA,GAAAnB,EAAA,CAAAoB,aAAA;MAAA,OAASpB,EAAA,CAAAqB,WAAA,CAAAF,OAAA,CAAAG,aAAA,EAAe;IAAA,EAAC;IACzBtB,EAAA,CAAAE,MAAA,GACJ;IAAAF,EAAA,CAAAG,YAAA,EAAO;;;;IADHH,EAAA,CAAAK,SAAA,GACJ;IADIL,EAAA,CAAAuB,kBAAA,MAAAC,MAAA,CAAAC,mBAAA,kCACJ;;;;;;;;IArBpBzB,EAAA,CAAAC,cAAA,cAA8E;IAIlED,EAAA,CAAAI,SAAA,cAA0F;IAC1FJ,EAAA,CAAAC,cAAA,cAAsB;IAAAD,EAAA,CAAAE,MAAA,GAAsB;IAAAF,EAAA,CAAAG,YAAA,EAAM;IAEtDH,EAAA,CAAAC,cAAA,cAA2B;IAEnBD,EAAA,CAAA0B,UAAA,IAAAC,6CAAA,kBAGO;IACX3B,EAAA,CAAAG,YAAA,EAAM;IACNH,EAAA,CAAAC,cAAA,cAA6B;IAErBD,EAAA,CAAAE,MAAA,IAEA;;IAAAF,EAAA,CAAA0B,UAAA,KAAAE,8CAAA,mBAGO;IACX5B,EAAA,CAAAG,YAAA,EAAI;;;;;IAjBcH,EAAA,CAAAK,SAAA,GAAsB;IAAtBL,EAAA,CAAA6B,iBAAA,CAAAhB,UAAA,CAAAiB,QAAA,CAAsB;IAIjB9B,EAAA,CAAAK,SAAA,GAAkB;IAAlBL,EAAA,CAAAM,UAAA,YAAAN,EAAA,CAAA+B,eAAA,IAAAC,GAAA,EAAkB;IAOrChC,EAAA,CAAAK,SAAA,GAEA;IAFAL,EAAA,CAAAuB,kBAAA,MAAAU,MAAA,CAAAR,mBAAA,GAAAZ,UAAA,CAAAqB,OAAA,GAAAlC,EAAA,CAAAmC,WAAA,QAAAtB,UAAA,CAAAqB,OAAA,KAAAD,MAAA,CAAAG,sBAAA,OAEA;IAA2BpC,EAAA,CAAAK,SAAA,GAAqD;IAArDL,EAAA,CAAAM,UAAA,SAAAO,UAAA,CAAAqB,OAAA,CAAAG,MAAA,GAAAJ,MAAA,CAAAG,sBAAA,CAAqD;;;;;;;;IA9BxGpC,EAAA,CAAAC,cAAA,UAAkB;IAEVD,EAAA,CAAAI,SAAA,aAAkG;IAElGJ,EAAA,CAAAC,cAAA,aAAwB;IACpBD,EAAA,CAAA0B,UAAA,IAAAY,uCAAA,kBAGO;IACXtC,EAAA,CAAAG,YAAA,EAAM;IACNH,EAAA,CAAAC,cAAA,aAA4D;IAAAD,EAAA,CAAAE,MAAA,sBAAe;IAAAF,EAAA,CAAAG,YAAA,EAAM;IAErFH,EAAA,CAAA0B,UAAA,IAAAa,sCAAA,mBA0BM;IAGVvC,EAAA,CAAAG,YAAA,EAAM;;;;IAvCOH,EAAA,CAAAK,SAAA,GAAkB;IAAlBL,EAAA,CAAAwC,qBAAA,QAAAC,MAAA,CAAA/B,IAAA,CAAAgC,KAAA,EAAA1C,EAAA,CAAA2C,aAAA,CAAkB;IAGI3C,EAAA,CAAAK,SAAA,GAAkB;IAAlBL,EAAA,CAAAM,UAAA,YAAAN,EAAA,CAAA+B,eAAA,IAAAC,GAAA,EAAkB;IAKpBhC,EAAA,CAAAK,SAAA,GAAkC;IAAlCL,EAAA,CAAAM,UAAA,eAAAN,EAAA,CAAA4C,eAAA,IAAAC,GAAA,EAAAJ,MAAA,CAAA/B,IAAA,CAAAoC,GAAA,EAAkC;IAErB9C,EAAA,CAAAK,SAAA,GAAe;IAAfL,EAAA,CAAAM,UAAA,YAAAmC,MAAA,CAAAM,YAAA,CAAe;;;;;;IAuC7C/C,EAAA,CAAAC,cAAA,eAAqE;IAA1BD,EAAA,CAAAe,UAAA,mBAAAiC,8DAAA;MAAA,MAAAC,WAAA,GAAAjD,EAAA,CAAAiB,aAAA,CAAAiC,IAAA;MAAA,MAAAC,QAAA,GAAAF,WAAA,CAAAG,SAAA;MAAA,MAAAC,OAAA,GAAArD,EAAA,CAAAoB,aAAA;MAAA,OAASpB,EAAA,CAAAqB,WAAA,CAAAgC,OAAA,CAAAC,SAAA,CAAAH,QAAA,CAAe;IAAA,EAAC;IAChEnD,EAAA,CAAAI,SAAA,YACgG;IACpGJ,EAAA,CAAAG,YAAA,EAAO;;;;;IADCH,EAAA,CAAAK,SAAA,GAAuF;IAAvFL,EAAA,CAAAM,UAAA,YAAAN,EAAA,CAAAO,eAAA,IAAAC,GAAA,EAAA+C,OAAA,CAAAC,gBAAA,IAAAL,QAAA,EAAAI,OAAA,CAAAC,gBAAA,GAAAL,QAAA,EAAuF;;;;;;IAV/GnD,EAAA,CAAAC,cAAA,cAAwC;IAC3BD,EAAA,CAAAE,MAAA,GAAY;IAAAF,EAAA,CAAAG,YAAA,EAAO;IAACH,EAAA,CAAAE,MAAA,iBAC7B;IAAAF,EAAA,CAAAG,YAAA,EAAI;IACJH,EAAA,CAAAC,cAAA,cAAoB;IACKD,EAAA,CAAAe,UAAA,oBAAA0C,wDAAA;MAAAzD,EAAA,CAAAiB,aAAA,CAAAyC,IAAA;MAAA,MAAAC,OAAA,GAAA3D,EAAA,CAAAoB,aAAA;MAAA,OAAUpB,EAAA,CAAAqB,WAAA,CAAAsC,OAAA,CAAAC,eAAA,EAAiB;IAAA,EAAC;IAC7C5D,EAAA,CAAAC,cAAA,mBACc;IADeD,EAAA,CAAAe,UAAA,2BAAA8C,mEAAAC,MAAA;MAAA9D,EAAA,CAAAiB,aAAA,CAAAyC,IAAA;MAAA,MAAAK,OAAA,GAAA/D,EAAA,CAAAoB,aAAA;MAAA,OAAApB,EAAA,CAAAqB,WAAA,CAAA0C,OAAA,CAAAC,cAAA,GAAAF,MAAA;IAAA,EAA4B;IAC3C9D,EAAA,CAAAG,YAAA,EAAW;IACzBH,EAAA,CAAAC,cAAA,cAAoB;IAChBD,EAAA,CAAA0B,UAAA,IAAAuC,uCAAA,mBAGO;IACXjE,EAAA,CAAAG,YAAA,EAAM;IACNH,EAAA,CAAAC,cAAA,kBAA0C;IAAAD,EAAA,CAAAE,MAAA,uBAAe;IAAAF,EAAA,CAAAG,YAAA,EAAS;;;;IAZjEH,EAAA,CAAAK,SAAA,GAAY;IAAZL,EAAA,CAAA6B,iBAAA,CAAAqC,MAAA,CAAApC,QAAA,CAAY;IAIgB9B,EAAA,CAAAK,SAAA,GAA4B;IAA5BL,EAAA,CAAAM,UAAA,YAAA4D,MAAA,CAAAF,cAAA,CAA4B;IAG9BhE,EAAA,CAAAK,SAAA,GAAkB;IAAlBL,EAAA,CAAAM,UAAA,YAAAN,EAAA,CAAA+B,eAAA,IAAAC,GAAA,EAAkB;;;ADnDrE;AAQA,OAAM,MAAOmC,iBAAiB;EAa5BC,YAAoBC,UAAsB,EAAUC,KAAqB,EAASC,WAAwB,EAChGC,MAAc;IADJ,KAAAH,UAAU,GAAVA,UAAU;IAAsB,KAAAC,KAAK,GAALA,KAAK;IAAyB,KAAAC,WAAW,GAAXA,WAAW;IACnF,KAAAC,MAAM,GAANA,MAAM;IAbhB,KAAAzB,YAAY,GAAc,EAAE;IAC5B,KAAA0B,kBAAkB,GAAY,KAAK;IAEnC,KAAAT,cAAc,GAAW,EAAE;IAC3B,KAAAR,gBAAgB,GAAW,CAAC;IAC5B,KAAA1B,QAAQ,GAAW,EAAE;IAIrB,KAAAM,sBAAsB,GAAW,EAAE;IACnC,KAAAX,mBAAmB,GAAY,KAAK;IAIhC,IAAI,CAACiD,cAAc,GAAGJ,KAAK;EAC7B;EAEFK,QAAQA,CAAA;IACNC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IACrB,IAAI,CAACC,SAAS,EAAE;IAEhB,MAAMC,MAAM,GAAG,IAAI,CAACT,KAAK,CAACU,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,IAAI,CAAC;IAGrD,IAAIH,MAAM,EAAE;MACV,IAAI,CAACV,UAAU,CAACc,OAAO,CAACJ,MAAM,CAAC,CAACK,SAAS,CAAE1E,IAAI,IAAI;QACjD,IAAI,CAACA,IAAI,GAAGA,IAAI;MAClB,CAAC,CAAC;MACF,IAAI,CAAC2D,UAAU,CAACgB,eAAe,CAACN,MAAM,CAAC,CAACK,SAAS,CAAEE,QAAQ,IAAI;QAE7D,IAAI,CAACvC,YAAY,GAAGuC,QAAQ;QAE5B,IAAI,IAAI,CAACvC,YAAY,CAACV,MAAM,KAAK,CAAC,EAAE;UAClC,IAAI,CAACoC,kBAAkB,GAAG,IAAI;;MAElC,CAAC,CAAC;;EAIN;EAEAnD,aAAaA,CAAA;IACX,IAAI,CAACG,mBAAmB,GAAG,CAAC,IAAI,CAACA,mBAAmB;EACtD;EAEAqD,SAASA,CAAA;IAEP,MAAMhD,QAAQ,GAAG,IAAI,CAACyC,WAAW,CAACgB,sBAAsB,EAAE;IAC1D,IAAGzD,QAAQ,EAAC;MACV,IAAI,CAACA,QAAQ,GAAGA,QAAQ;;EAE5B;EAEAwB,SAASA,CAAC3C,MAAc;IACtB,IAAI,CAAC6C,gBAAgB,GAAG7C,MAAM;EAChC;EAEAiD,eAAeA,CAAA;IACb,IAAI,IAAI,CAACI,cAAc,CAACwB,IAAI,EAAE,KAAK,EAAE,EAAE;MACrC;;IAGF,MAAMT,MAAM,GAAG,IAAI,CAACL,cAAc,CAACM,QAAQ,CAACS,MAAM,CAAC,IAAI,CAAC;IACxD,MAAMC,QAAQ,GAAG,IAAI,CAAChB,cAAc,CAACM,QAAQ,CAACS,MAAM,CAAC,MAAM,CAAC;IAC5D,MAAME,aAAa,GAAG,IAAI,CAACpB,WAAW,CAACqB,gBAAgB,EAAE;IACzD,IAAGD,aAAa,KAAK,IAAI,EAAC;MACxB;;IAGF,MAAME,UAAU,GAAY;MAC1B3D,OAAO,EAAE,IAAI,CAAC8B,cAAc;MAC5B8B,MAAM,EAAE;QAAChD,GAAG,EAAE6C;MAAa,CAAS;MACrC7D,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACtBiD,MAAM,EAAEA,MAAM;MACdW,QAAQ,EAACA,QAAQ;MACjB/E,MAAM,EAAE,IAAI,CAAC6C;KACd;IAED,IAAI,IAAI,CAAC9C,IAAI,EAAE;MACb,IAAI,CAACA,IAAI,CAACqF,WAAW,CAACC,IAAI,CAACH,UAAU,CAAC;MAGxC,IAAI,CAACxB,UAAU,CAAC4B,qBAAqB,CAAC,IAAI,CAACvF,IAAI,CAAC,CAAC0E,SAAS,CAAEc,WAAW,IAAI;QACzE,IAAI,CAACxF,IAAI,GAAGwF,WAAW;QACvB,IAAI,CAAClC,cAAc,GAAG,EAAE;QACxB,IAAI,CAACR,gBAAgB,GAAG,CAAC;QAEzBoB,MAAM,CAACuB,QAAQ,CAACC,MAAM,EAAE;MAC1B,CAAC,CAAC;;EAEJ;;AA3FWjC,iBAAiB,C;mBAAjBA,iBAAiB,EAAAnE,EAAA,CAAAqG,iBAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAvG,EAAA,CAAAqG,iBAAA,CAAAG,EAAA,CAAAC,cAAA,GAAAzG,EAAA,CAAAqG,iBAAA,CAAAK,EAAA,CAAAC,WAAA,GAAA3G,EAAA,CAAAqG,iBAAA,CAAAG,EAAA,CAAAI,MAAA;AAAA;AAAjBzC,iBAAiB,C;QAAjBA,iBAAiB;EAAA0C,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCf9BnH,EAAA,CAAAC,cAAA,YAAO;MAECD,EAAA,CAAA0B,UAAA,IAAA2F,gCAAA,iBAEM;MAENrH,EAAA,CAAAC,cAAA,aAAuB;MACnBD,EAAA,CAAA0B,UAAA,IAAA4F,gCAAA,iBAyCM;MAENtH,EAAA,CAAA0B,UAAA,IAAA6F,gCAAA,kBAgBM;MAEVvH,EAAA,CAAAG,YAAA,EAAM;;;MAlEAH,EAAA,CAAAK,SAAA,GAAwB;MAAxBL,EAAA,CAAAM,UAAA,SAAA8G,GAAA,CAAA3C,kBAAA,CAAwB;MAKpBzE,EAAA,CAAAK,SAAA,GAAU;MAAVL,EAAA,CAAAM,UAAA,SAAA8G,GAAA,CAAA1G,IAAA,CAAU;MA2CYV,EAAA,CAAAK,SAAA,GAAU;MAAVL,EAAA,CAAAM,UAAA,SAAA8G,GAAA,CAAA1G,IAAA,CAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}