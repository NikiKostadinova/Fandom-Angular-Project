{"ast":null,"code":"import { NG_VALIDATORS } from '@angular/forms';\nimport { appEmailValidator } from './app-email-validator';\nimport { appEmailAsyncValidator } from './emailValidator';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/user/user.service\";\nexport class AppEmailDirective {\n  constructor(userService) {\n    this.userService = userService;\n    this.appEmail = [];\n    this.validator = () => null;\n  }\n  validate(control) {\n    const emailValidator = appEmailValidator(this.appEmail);\n    const asyncValidator = appEmailAsyncValidator(this.userService);\n    const syncValidationResult = emailValidator(control);\n    if (syncValidationResult) {\n      return syncValidationResult; // Return if sync validation fails\n    }\n\n    return asyncValidator(control); // Return the result of async validation\n  }\n\n  ngOnChanges(changes) {\n    const currentEmailChanges = changes[\"appEmail\"];\n    if (currentEmailChanges) {\n      this.validator = appEmailValidator(currentEmailChanges.currentValue);\n    }\n  }\n}\nAppEmailDirective.ɵfac = function AppEmailDirective_Factory(t) {\n  return new (t || AppEmailDirective)(i0.ɵɵdirectiveInject(i1.UserService));\n};\nAppEmailDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: AppEmailDirective,\n  selectors: [[\"\", \"appEmail\", \"\"]],\n  inputs: {\n    appEmail: \"appEmail\"\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: NG_VALIDATORS,\n    useExisting: AppEmailDirective,\n    multi: true\n  }]), i0.ɵɵNgOnChangesFeature]\n});","map":{"version":3,"names":["NG_VALIDATORS","appEmailValidator","appEmailAsyncValidator","AppEmailDirective","constructor","userService","appEmail","validator","validate","control","emailValidator","asyncValidator","syncValidationResult","ngOnChanges","changes","currentEmailChanges","currentValue","i0","ɵɵdirectiveInject","i1","UserService","selectors","inputs","features","ɵɵProvidersFeature","provide","useExisting","multi","ɵɵNgOnChangesFeature"],"sources":["D:\\JS\\AngularProjects\\fandom\\fandom\\src\\app\\shared\\validators\\app-email.directive.ts"],"sourcesContent":["import { Directive, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { Validator, AbstractControl, ValidationErrors, ValidatorFn, NG_VALIDATORS } from '@angular/forms';\nimport { appEmailValidator} from './app-email-validator';\nimport { UserService } from 'src/app/user/user.service';\nimport { appEmailAsyncValidator } from './emailValidator';\n\n@Directive({\n  selector: \"[appEmail]\",\n  providers: [\n    {\n      provide: NG_VALIDATORS,\n      useExisting: AppEmailDirective,\n      multi: true,\n    },\n  ],\n})\nexport class AppEmailDirective implements Validator, OnChanges {\n  @Input() appEmail: string[] = [];\n\n   validator: ValidatorFn = () => null;\n\n  constructor(private userService: UserService) { }\n\n  validate(control: AbstractControl): ValidationErrors | null {\n    const emailValidator = appEmailValidator(this.appEmail);\n    const asyncValidator = appEmailAsyncValidator(this.userService);\n\n    const syncValidationResult = emailValidator(control);\n    if (syncValidationResult) {\n      return syncValidationResult; // Return if sync validation fails\n    }\n\n    return asyncValidator(control); // Return the result of async validation\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const currentEmailChanges = changes[\"appEmail\"];\n    if (currentEmailChanges) {\n      this.validator = appEmailValidator(currentEmailChanges.currentValue);\n    }\n  }\n}\n\n\n\n\n"],"mappings":"AACA,SAAoEA,aAAa,QAAQ,gBAAgB;AACzG,SAASC,iBAAiB,QAAO,uBAAuB;AAExD,SAASC,sBAAsB,QAAQ,kBAAkB;;;AAYzD,OAAM,MAAOC,iBAAiB;EAK5BC,YAAoBC,WAAwB;IAAxB,KAAAA,WAAW,GAAXA,WAAW;IAJtB,KAAAC,QAAQ,GAAa,EAAE;IAE/B,KAAAC,SAAS,GAAgB,MAAM,IAAI;EAEY;EAEhDC,QAAQA,CAACC,OAAwB;IAC/B,MAAMC,cAAc,GAAGT,iBAAiB,CAAC,IAAI,CAACK,QAAQ,CAAC;IACvD,MAAMK,cAAc,GAAGT,sBAAsB,CAAC,IAAI,CAACG,WAAW,CAAC;IAE/D,MAAMO,oBAAoB,GAAGF,cAAc,CAACD,OAAO,CAAC;IACpD,IAAIG,oBAAoB,EAAE;MACxB,OAAOA,oBAAoB,CAAC,CAAC;;;IAG/B,OAAOD,cAAc,CAACF,OAAO,CAAC,CAAC,CAAC;EAClC;;EAEAI,WAAWA,CAACC,OAAsB;IAChC,MAAMC,mBAAmB,GAAGD,OAAO,CAAC,UAAU,CAAC;IAC/C,IAAIC,mBAAmB,EAAE;MACvB,IAAI,CAACR,SAAS,GAAGN,iBAAiB,CAACc,mBAAmB,CAACC,YAAY,CAAC;;EAExE;;AAxBWb,iBAAiB,C;mBAAjBA,iBAAiB,EAAAc,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,WAAA;AAAA;AAAjBjB,iBAAiB,C;QAAjBA,iBAAiB;EAAAkB,SAAA;EAAAC,MAAA;IAAAhB,QAAA;EAAA;EAAAiB,QAAA,GAAAN,EAAA,CAAAO,kBAAA,CARjB,CACT;IACEC,OAAO,EAAEzB,aAAa;IACtB0B,WAAW,EAAEvB,iBAAiB;IAC9BwB,KAAK,EAAE;GACR,CACF,GAAAV,EAAA,CAAAW,oBAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}